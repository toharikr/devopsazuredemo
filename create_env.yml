- hosts: localhost
  tasks:
  
    - name: Get repository
      git:
       repo: 'https://github.com/toharikr/devopsazuredemo.git'
       dest: $(Build.SourcesDirectory)    
    
    - name: ansible create directory example
      file:
       path: ~/.azure
       state: directory
    - copy:
       src: $(Build.SourcesDirectory)/credentials
       dest: ~/.azure
      
    - script: ansible-playbook $(Build.SourcesDirectory)/tests/test.yml
        
    - include_role:
        name: demorole
      vars:
        monitoring: yes
        name: akscluster
        resource_group: aksroletest
